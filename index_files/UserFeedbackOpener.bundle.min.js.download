!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("UserFeedbackOpener",[],t):"object"==typeof exports?exports.UserFeedbackOpener=t():e.UserFeedbackOpener=t()}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://static.parastorage.com/services/user-feedback-opener/1.695.0/",n(n.s=64)}([function(e,t,n){"use strict";var r=n(19),o=n(47),i=Object.prototype.toString;function s(e){return"[object Array]"===i.call(e)}function u(e){return null!==e&&"object"==typeof e}function a(e){return"[object Function]"===i.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),s(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:o,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:u,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:a,isStream:function(e){return u(e)&&a(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,o=arguments.length;r<o;r++)c(arguments[r],n);return t},extend:function(e,t,n){return c(t,(function(t,o){e[o]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobal=t.getWindowIfTop=t.isBackoffice=t.isWebWorker=t.getHost=t.setHost=void 0;var r,o,i=n(4);function s(e){if("undefined"!=typeof window&&window)try{return window.top===window.self?e?e(window):window:null}catch(e){return null}return null}function u(e,t){return void 0===t&&(t=null),"undefined"!=typeof self&&self&&e(self)||t}t.setHost=function(e){r=e},t.getHost=function(e){return void 0===e&&(e=i.DefaultBrand),r||(void 0===o&&(o=u((function(e){return e.location&&e.location.hostname&&(e.location.hostname.match(/\.(wix|editorx)\.com$/)||[])[1]||null}),null)),"frog."+(o||i.BrandToHostMap[e]||i.BrandToHostMap[i.DefaultBrand])+".com")},t.isWebWorker=function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope},t.isBackoffice=function(){return s((function(e){var t=e.document;return i.BackofficeDomains.some((function(e){return-1!==t.location.host.indexOf(e)}))}))},t.getWindowIfTop=s,t.getGlobal=u},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var r={policy:"getCurrentConsentPolicy",header:"_getConsentPolicyHeader",isMethod:!0},o={policy:"consentPolicy",header:"consentPolicyHeader",isMethod:!1},i={essential:!0,dataToThirdParty:!0,advertising:!0,functional:!0,analytics:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readCookie=t.sendBeacon=t.getWindowSize=t.getDesktopSize=t.now=void 0,t.now=function(){return"undefined"!=typeof performance&&performance&&performance.now?performance.now():-1},t.getDesktopSize=function(e){return(e.screen&&e.screen.width||0)+"x"+(e.screen&&e.screen.height||0)},t.getWindowSize=function(e){var t=0,n=0;return e.innerWidth?(t=e.innerWidth,n=e.innerHeight):e.document&&(e.document.documentElement&&e.document.documentElement.clientWidth?(t=e.document.documentElement.clientWidth,n=e.document.documentElement.clientHeight):e.document.body&&e.document.body.clientWidth&&(t=e.document.body.clientWidth,n=e.document.body.clientHeight)),t+"x"+n},t.sendBeacon=function(e,t){return!("undefined"==typeof navigator||!navigator||!navigator.sendBeacon)&&navigator.sendBeacon(e,t)},t.readCookie=function(e){if("undefined"==typeof document)return null;for(var t=0,n=document.cookie.split(";");t<n.length;t++){for(var r=n[t].split("="),o=r[0],i=r[1];" "===o[0];)o=o.substr(1);if(o===e)return i}return""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultCommonConfig=t.DefaultConsentPolicy=t.BrandToHostMap=t.DefaultBrand=t.EventContextMap=t.BackofficeDomains=t.LoggerVersion=void 0,t.LoggerVersion="2.0.875",t.BackofficeDomains=[".wix.com",".editorx.com"],function(e){e.msid="_msid",e.clientId="_client_id",e.uuid="_uuid",e.visitorId="_visitorId",e.siteMemberId="_siteMemberId",e.brandId="_brandId",e.ms="_ms"}(t.EventContextMap||(t.EventContextMap={})),t.DefaultBrand="wix",t.BrandToHostMap={wix:"wix",editorx:"editorx"},t.DefaultConsentPolicy={functional:!0,analytics:!0},t.DefaultCommonConfig={brand:t.DefaultBrand}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Errors=t.EventCategories=t.PublishMethods=void 0,function(e){e.Auto="auto",e.PostMessage="postMessage",e.Fetch="fetch"}(t.PublishMethods||(t.PublishMethods={})),function(e){e.Essential="essential",e.Functional="functional",e.Analytics="analytics"}(t.EventCategories||(t.EventCategories={})),function(e){e[e.Unsupported=0]="Unsupported"}(t.Errors||(t.Errors={}))},function(e,t){},function(e,t,n){var r={EventEmitter:n(26),EmitterSubscription:n(14)};e.exports=r},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var r,o=n(2);function i(){return window}function s(){return self}function u(){return e}function a(){return globalThis}function c(e){var t;void 0===e&&(e=void 0),e&&(r=e),r||e||([a,u,s,i].forEach((function(e){try{r||(r=e())}catch(e){}})),r=r);try{"object"==typeof r.commonConfig&&r.commonConfig.consentPolicy&&(t=f(r.commonConfig,o.c)),t||"object"!=typeof r.consentPolicyManager||(t=f(r.consentPolicyManager,o.b)),t||"object"!=typeof r.Wix||"object"!=typeof r.Wix.Utils||"function"!=typeof r.Wix.Utils.getCurrentConsentPolicy||(t=f(r.Wix.Utils,o.b))}catch(e){}return t}function f(e,t){return{getCurrentConsentPolicy:function(){var n=e[t.policy];return t.isMethod?n():n},_getConsentPolicyHeader:function(){var n=e[t.header];return t.isMethod?n():n},deleteReference:!t.isMethod}}}).call(this,n(44))},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name=n.constructor.name,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}();e.exports.defined=function(e,t){if(void 0===e)throw new o(t)},e.exports.object=function(e,t){if(void 0!==e&&("object"!==(void 0===e?"undefined":r(e))||Array.isArray(e)||null===e))throw new o(t)},e.exports.ok=function(e,t){if(!e)throw new o(t)},e.exports.func=function(e,t){if(void 0!==e&&"function"!=typeof e)throw new o(t)},e.exports.AssertionError=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.guid=t.buildBiUrl=t.getCookies=void 0;var r=n(3),o=n(1),i=0;t.getCookies=function(e){return Object.keys(e).reduce((function(t,n){var o="string"==typeof e[n]?{name:e[n]}:e[n],i=o.name,s=o.transform,u=(void 0===s?function(e){return e}:s)(r.readCookie(i));return u&&(t[n]=u),t}),{})},t.buildBiUrl=function(e,t,n){var r=e.host,s=void 0===r?"":r,u=e.endpoint,a=void 0===u?"":u;void 0===n&&(n={}),s=(s="function"==typeof s?s():s)||o.getHost(),a=n.endpoint||a,n.useBatch||(t._=""+(new Date).getTime()+i++);var c=n.useBatch?[]:Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}),[]);return["//"+s+"/"+a].concat(c.length?c.join("&"):[]).join("?")},t.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.APINotSupportedError=t.AssertionError=void 0;var i=function(e){function t(t){var n=e.call(this,t)||this;return n.name=n.constructor.name,n}return o(t,e),t}(Error);t.AssertionError=i;var s=function(e){function t(t){var n=e.call(this,t)||this;return n.name=n.constructor.name,n}return o(t,e),t}(Error);t.APINotSupportedError=s},function(e,t,n){"use strict";(function(t){var r=n(0),o=n(50),i={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,a={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t)&&(u=n(20)),u),transformRequest:[function(e,t){return o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};a.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){a.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){a.headers[e]=r.merge(i)})),e.exports=a}).call(this,n(49))},function(e,t){var n=function(e,t){return{parse:function(t,r){var s=JSON.parse(t,i).map(o),u=s[0],a=r||n,c="object"==typeof u&&u?function t(n,r,o,i){return Object.keys(o).reduce((function(o,s){var u=o[s];if(u instanceof e){var a=n[u];"object"!=typeof a||r.has(a)?o[s]=i.call(o,s,a):(r.add(a),o[s]=i.call(o,s,t(n,r,a,i)))}else o[s]=i.call(o,s,u);return o}),o)}(s,new Set,u,a):u;return a.call({"":c},"",c)},stringify:function(e,t,o){for(var i,s=new Map,u=[],a=[],c=t&&typeof t==typeof u?function(e,n){if(""===e||-1<t.indexOf(e))return n}:t||n,f=+r(s,u,c.call({"":e},"",e)),l=function(e,t){if(i)return i=!i,t;var n=c.call(this,e,t);switch(typeof n){case"object":if(null===n)return n;case"string":return s.get(n)||r(s,u,n)}return n};f<u.length;f++)i=!0,a[f]=JSON.stringify(u[f],l,o);return"["+a.join(",")+"]"}};function n(e,t){return t}function r(t,n,r){var o=e(n.push(r)-1);return t.set(r,o),o}function o(t){return t instanceof e?e(t):t}function i(t,n){return"string"==typeof n?new e(n):n}}(String);e.exports=n},function(e,t,n){"use strict";var r=function(e){function t(n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,n),this.listener=r,this.context=o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(n(27));e.exports=r},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o,i,s,u){if(!e){var a;if(void 0===t)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,s,u],f=0;(a=new Error(t.replace(/%s/g,(function(){return c[f++]})))).name="Invariant Violation"}throw a.framesToPop=1,a}}},function(e,t,n){"use strict";var r=n(30),o=n(17),i=n(18);e.exports.BiLoggerFactory=r,e.exports.BiLogger=o,e.exports.BiLoggerManager=i.BiLoggerManager,e.exports.factory=function(){return new r},e.exports.manager=i.manager},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=n(9),i=n(31),s=i.mapValues,u=i.filterValues,a=n(32),c=n(33),f=n(34),l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._publishers=t.publishers,this._validators=t.validators||[],this._defaults=t.defaults,this._events=t.events||{},this._context=n||{},this._defaultValueTimeout=t.defaultValueTimeout||5e3,this._defaultContinueOnFail=t.defaultContinueOnFail||!1,this._onPublisherFailHandler=t.onPublisherFailHandler||e._defaultPublisherFailHandler}return r(e,[{key:"log",value:function(e,t,n){var r=this;o.defined(e,"Event object or event key must be provided.");var i=this._extractEventAndContext(e,t,n),a=i.event,c=i.context,f=void 0!==c.useBatch?c.useBatch:this._context.useBatch;if(f){var l=this._initBuffer(f),d=u(this._defaults,(function(e){return"function"==typeof e})),p=s(d,(function(e){return e()}));return l.feed(Object.assign({},a,p),c)}return this._getDefaults().then((function(e){var t=Object.assign({},e,a);if(!(0===r._validators.length||r._validators.some((function(e){return e.match(t)&&(e.execute(t)||!0)}))))throw new Error("No validator accepted the event. Source: "+t.src+" Evid: "+(t.evid||t.evtId));return r._send(t,c)}))}},{key:"flush",value:function(){return this._buffer?this._buffer.flush():Promise.resolve()}},{key:"_send",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Promise.all(this._publishers.map((function(r){var o=Object.assign({},e);return Promise.resolve().then((function(){return r(o,Object.assign({},t._context,n))})).catch((function(n){return t._onPublisherFailHandler(n,{publisherName:r.name,payload:e})}))}))).then((function(){}))}},{key:"_extractEventAndContext",value:function(e,t,n){var r=void 0,i={};if("string"!=typeof e)r=e,i=t||i;else{if(!(r=this._events[e]))throw new o.AssertionError("Event with key '"+e+"' not found in event map.");t&&(r=Object.assign({},r,t),i=n||i)}return{event:r,context:i}}},{key:"_initBuffer",value:function(e){var t=this,n=!0===e?300:e;return this._buffer||(this._buffer=new f(n).onFlush((function(n){var r=u(t._defaults,(function(e){return"function"!=typeof e}));return n.g=r,t._send(n,{useBatch:e})})))}},{key:"_handleDefaultsError",value:function(e){return this._defaultContinueOnFail?(c.error(e),null):Promise.reject(e)}},{key:"_getDefaults",value:function(){var e=this;if(!this._defaults)return Promise.resolve({});var t=s(this._defaults,(function(t,n){if("function"==typeof t)try{t=t()}catch(t){return e._handleDefaultsError(t)}return t&&"function"==typeof t.then?a.timedPromise(t,{message:"Cannot get default value '"+n+" for BI Event'",timeout:e._defaultValueTimeout}).catch((function(t){return e._handleDefaultsError(t)})):t}));return a.allAsObject(t)}}],[{key:"_defaultPublisherFailHandler",value:function(e,t){return t.publisherName}}]),e}();e.exports=l},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=n(9),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset()}return r(e,[{key:"reset",value:function(){this._handlers=[]}},{key:"onLoggerCreated",value:function(e){var t=this;return o.defined(e,"Handler must be provided."),o.func(e,"Handler must be a function."),this._handlers.push(e),function(){var n=t._handlers.indexOf(e);-1!==n&&t._handlers.splice(n,1)}}},{key:"notifyLoggerCreated",value:function(e){this._handlers.forEach((function(t){return t(e)}))}}]),e}();e.exports={manager:new i,BiLoggerManager:i}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(0),o=n(51),i=n(53),s=n(54),u=n(55),a=n(21);e.exports=function(e){return new Promise((function(t,c){var f=e.data,l=e.headers;r.isFormData(f)&&delete l["Content-Type"];var d=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",h=e.auth.password||"";l.Authorization="Basic "+btoa(p+":"+h)}if(d.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in d?s(d.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:n,config:e,request:d};o(t,c,r),d=null}},d.onerror=function(){c(a("Network Error",e,null,d)),d=null},d.ontimeout=function(){c(a("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var g=n(56),m=(e.withCredentials||u(e.url))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;m&&(l[e.xsrfHeaderName]=m)}if("setRequestHeader"in d&&r.forEach(l,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete l[t]:d.setRequestHeader(t,e)})),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){d&&(d.abort(),c(e),d=null)})),void 0===f&&(f=null),d.send(f)}))}},function(e,t,n){"use strict";var r=n(52);e.exports=function(e,t,n,o,i){var s=new Error(e);return r(s,t,n,o,i)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.EventCategories=t.manager=t.setHost=t.factory=void 0;var s=n(16),u=i(n(36)),a=i(n(38));t.factory=function(e){void 0===e&&(e={});var t=e.trackSession||void 0===e.trackSession;return t&&u.track(a.factory,{force:"force"===t}),a.factory(e)},t.setHost=a.setHost,t.manager=s.manager,t.EventCategories=a.EventCategories,t.default={factory:t.factory,setHost:a.setHost,manager:s.manager,EventCategories:a.EventCategories}},function(e,t,n){e.exports=n(46)},function(e,t,n){"use strict";var r=n(14),o=n(28),i=n(29),s=n(15),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._subscriber=new o,this._currentSubscription=null}return e.prototype.addListener=function(e,t,n){return this._subscriber.addSubscription(e,new r(this._subscriber,t,n))},e.prototype.once=function(e,t,n){var r=this;return this.addListener(e,(function(){r.removeCurrentListener(),t.apply(n,arguments)}))},e.prototype.removeAllListeners=function(e){this._subscriber.removeAllSubscriptions(e)},e.prototype.removeCurrentListener=function(){this._currentSubscription||s(!1),this._subscriber.removeSubscription(this._currentSubscription)},e.prototype.listeners=function(e){var t=this._subscriber.getSubscriptionsForType(e);return t?t.filter(i.thatReturnsTrue).map((function(e){return e.listener})):[]},e.prototype.emit=function(e){var t=this._subscriber.getSubscriptionsForType(e);if(t){for(var n=Object.keys(t),r=0;r<n.length;r++){var o=n[r],i=t[o];i&&(this._currentSubscription=i,this.__emitToSubscription.apply(this,[i].concat(Array.prototype.slice.call(arguments))))}this._currentSubscription=null}},e.prototype.__emitToSubscription=function(e,t){var n=Array.prototype.slice.call(arguments,2);e.listener.apply(e.context,n)},e}();e.exports=u},function(e,t,n){"use strict";var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subscriber=t}return e.prototype.remove=function(){this.subscriber&&(this.subscriber.removeSubscription(this),this.subscriber=null)},e}();e.exports=r},function(e,t,n){"use strict";var r=n(15),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._subscriptionsForType={},this._currentSubscription=null}return e.prototype.addSubscription=function(e,t){t.subscriber!==this&&r(!1),this._subscriptionsForType[e]||(this._subscriptionsForType[e]=[]);var n=this._subscriptionsForType[e].length;return this._subscriptionsForType[e].push(t),t.eventType=e,t.key=n,t},e.prototype.removeAllSubscriptions=function(e){void 0===e?this._subscriptionsForType={}:delete this._subscriptionsForType[e]},e.prototype.removeSubscription=function(e){var t=e.eventType,n=e.key,r=this._subscriptionsForType[t];r&&delete r[n]},e.prototype.getSubscriptionsForType=function(e){return this._subscriptionsForType[e]},e}();e.exports=o},function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(9),s=n(17),u=n(18),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._publishers=[],this._validators=[],this._defaults={},this._events={}}return o(e,[{key:"addPublisher",value:function(e){return i.defined(e,"Publisher must be provided"),i.ok("function"==typeof e,"Expected a publisher function"),this._publishers.push(e),this}},{key:"addValidator",value:function(e){return i.defined(e,"Validator must be provided"),i.ok("object"===(void 0===e?"undefined":r(e))&&e,"Expected a validator object"),i.ok(e.execute&&e.match,"Provided validator does not match the interface"),this._validators.push(e),this}},{key:"setDefaults",value:function(e){return i.defined(e,"Defaults must be provided"),i.object(e,"Defaults must be an object"),this._defaults=e,this}},{key:"updateDefaults",value:function(e){return i.defined(e,"Defaults must be provided"),i.object(e,"Defaults must be an object"),Object.assign(this._defaults,e),this}},{key:"setEvents",value:function(e){return i.defined(e,"Events must be provided"),i.object(e,"Events must be an object"),this._events=e,this}},{key:"setDefaultValueTimeout",value:function(e){return i.defined(e,"Default Value Timeout must be provided"),this._defaultValueTimeout=e,this}},{key:"setDefaultContinueOnFail",value:function(e){return i.defined(e,"Default Continue On Fail must be provided"),this._defaultContinueOnFail=e,this}},{key:"setPublisherFailHandler",value:function(e){return i.defined(e,"Publisher Fail Handler must be provided"),this._onPublisherFailHandler=e,this}},{key:"logger",value:function(e){var t=new s({publishers:this._publishers,validators:this._validators,defaults:this._defaults,events:this._events,defaultValueTimeout:this._defaultValueTimeout,defaultContinueOnFail:this._defaultContinueOnFail,onPublisherFailHandler:this._onPublisherFailHandler},e);return u.manager.notifyLoggerCreated(t),t}}]),e}();e.exports=a},function(e,t,n){"use strict";e.exports.mapValues=function(e,t){return e?Object.keys(e).reduce((function(n,r){return n[r]=t(e[r],r,e),n}),{}):{}},e.exports.filterValues=function(e,t){return e?Object.keys(e).reduce((function(n,r){return t(e[r],r,e)&&(n[r]=e[r]),n}),{}):{}}},function(e,t,n){"use strict";e.exports.timedPromise=function(e,t){var n=t.message,r=t.timeout,o=new Promise((function(e,t){setTimeout(t,r,n?"Timeout: "+n:"Timeout")}));return Promise.race([e,o])},e.exports.allAsObject=function(e){var t=Object.keys(e);return Promise.all(t.map((function(t){return e[t]}))).then((function(e){return e.reduce((function(e,n,r){return e[t[r]]=n,e}),{})}))}},function(e,t,n){"use strict";e.exports={error:function(){var e;console&&console.error&&(e=console).error.apply(e,arguments)}}},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=n(35),i=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._flushHandler=function(e){return e},this._flushDebounced=o((function(){return n.flush()}),t),this._init()}return r(e,[{key:"_init",value:function(){var e=this;this._startTime=Date.now(),this._events=[],this._resolve=null,this._promise=new Promise((function(t){return e._resolve=t}))}},{key:"flush",value:function(){if(!this._events.length)return Promise.resolve();var e=this._events,t=this._resolve,n=this._startTime;return this._init(),this._flushHandler(function(e,t){return{dt:Date.now()-t,e:e}}(e,n)).then(t)}},{key:"onFlush",value:function(e){return this._flushHandler=e,this}},{key:"feed",value:function(e,t){return this._events.push(function(e,t,n){return{dt:Date.now()-n,f:e,context:t}}(e,t,this._startTime)),this._flushDebounced(),this._promise}}]),e}();e.exports=i},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=void 0;return function(){var o=this,i=arguments,s=function(){r=null,n||e.apply(o,i)},u=n&&!r;clearTimeout(r),r=setTimeout(s,t),u&&e.apply(o,i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.track=void 0;var r=n(10),o=n(37),i=n(1),s=n(3);function u(e){var t=function(e){return e({endpoint:"p"}).updateDefaults({src:19,evid:3,vsi:r.guid()}).logger()}(e),n=1;o.listen((function(e,r){var o=i.getWindowIfTop((function(e){return{sr:s.getDesktopSize(e),wr:s.getWindowSize(e)}})),u=o.sr,a=o.wr;t.log({from:e,to:r,fis:n,sr:u,wr:a}),n=0}))}t.track=function(e,t){void 0===t&&(t={force:!1}),(t.force||!i.isWebWorker()&&i.isBackoffice()&&i.getWindowIfTop((function(e){return!e.__isTrackingPageViews__})))&&(i.getWindowIfTop((function(e){return e.__isTrackingPageViews__=!0})),u(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listen=void 0;var r=n(1);function o(e){setTimeout((function(){return r.getWindowIfTop((function(t){return e(t.location.href)}))}))}function i(e){r.getWindowIfTop((function(t){var n=t.history;return["pushState","replaceState"].forEach((function(t){!function(e,t,n){if(e&&e[t]){var r=e[t];e[t]=function(){return n.apply(null,arguments),r.apply(e,arguments)}}}(n,t,(function(t,n,r){return e(r)}))}))}))}function s(e){r.getWindowIfTop((function(t){return t.addEventListener("popstate",(function(){return e(t.location.href)}))}))}t.listen=function(e){r.getWindowIfTop((function(t){var n=t.document.referrer;[o,i,s].forEach((function(t){return t((function(t){e(n,t),n=t}))}))}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.manager=t.factory=t.Factory=t.resolveLogArgs=void 0;var u=n(16),a=n(3),c=s(n(39)),f=n(40),l=n(10),d=s(n(42)),p=n(45),h=n(1),g=n(4),m=n(5),v=n(5);Object.defineProperty(t,"PublishMethods",{enumerable:!0,get:function(){return v.PublishMethods}}),Object.defineProperty(t,"EventCategories",{enumerable:!0,get:function(){return v.EventCategories}});var y=n(1);Object.defineProperty(t,"setHost",{enumerable:!0,get:function(){return y.setHost}});var b=function(e,t){return void 0===t&&(t=!1),Object.keys(e).reduce((function(n,r){var o=g.EventContextMap[r]||r;return g.EventContextMap[r]&&void 0!==e[r]?n[o]=e[r]:n[r]=e[r],t&&"function"==typeof n[o]&&(n[o]=n[o]()),n}),{})},w=function(e){return p.getCommonConfigValue("brand",e())};t.resolveLogArgs=function(e,t,n){return"string"==typeof e?[e,t,n]:[null,e,t]};var E=function(){function e(e){var t;void 0===e&&(e={}),this.options=e,this.commonConfigGetter=function(){},this.nonEssentialContext=null,this.initialized=!1,this.muted=!1,c.ok(!e.publishMethod||(t=e.publishMethod,-1!==Object.keys(m.PublishMethods).map((function(e){return m.PublishMethods[e]})).indexOf(t)),'Unsupported publish method "'+e.publishMethod+'"'),this.loggerClientFactory=u.factory()}return e.prototype.initFactory=function(){var e,t=this;if(this.initialized)return this.loggerClientFactory;this.initialized=!0,this.updateDefaults((e=this.commonConfigGetter,b({brandId:function(){return w(e)},ms:function(){return Math.round(a.now())}}))),this.withUserContext(l.getCookies({clientId:"_wixCIDX",uuid:{name:"_wixUIDX",transform:function(e){return"string"==typeof e&&e.split("|")[1]}}}));var n=r(r({},this.options),{host:this.options.host||function(){return h.getHost(w(t.commonConfigGetter))}}),o=f.getPublisher(n,this.transformer,this.publishFunctions);return this.loggerClientFactory.addPublisher(o)},e.prototype.withTransformer=function(e){return c.defined(e,"Transformer must be provided"),c.ok("function"==typeof e||e&&"function"==typeof e[m.PublishMethods.PostMessage],"Valid transformer must be provided"),this.transformer=e,this},e.prototype.withPublishFunction=function(e){return c.defined(e,"Publish functions object must be provided"),c.ok(this.options.publishMethod&&this.options.publishMethod!==m.PublishMethods.Auto,"Publish function can be used only when using a custom publish method"),c.ok(e&&"function"==typeof e[this.options.publishMethod],"Valid publish function must be provided"),this.publishFunctions=e,this},e.prototype.withUserContext=function(e){return c.defined(e,"User context object must be provided"),this.updateDefaults(b(e)),this},e.prototype.withUoUContext=function(e){return c.defined(e,"UoU context object must be provided"),this.updateDefaults(b(e)),this},e.prototype.withNonEssentialContext=function(e){return c.defined(e,"Non-essential context object must be provided"),this.nonEssentialContext=r(r({},this.nonEssentialContext||{}),e),this},e.prototype.withCommonConfigGetter=function(e){return c.defined(e,"Common config getter must be provided"),c.ok("function"==typeof e,"Common config getter must be a function"),this.commonConfigGetter=e,this},e.prototype.updateDefaults=function(e){return this.loggerClientFactory.updateDefaults(e),this},e.prototype.setMuted=function(e){return this.muted=e,this},e.prototype.setEvents=function(e){return this.loggerClientFactory.setEvents(e),this},e.prototype.onError=function(e){return this.loggerClientFactory.setPublisherFailHandler(e),this},e.prototype.logger=function(e){void 0===e&&(e={});var n=this,o=void 0!==e.useBatch?e.useBatch:this.options.useBatch,i=this.initFactory().logger(r(r({},e),{useBatch:o}));return{log:function(e,o,s){var u=t.resolveLogArgs(e,o,s),a=u[0],c=u[1],f=u[2],l=f&&f.category;return n.muted||d.shouldMuteByCategory(l)?Promise.resolve():(!d.shouldMuteNonEssentials()&&n.nonEssentialContext&&(c=r(r({},c),b(n.nonEssentialContext,!0))),a?i.log(a,c,f):i.log(c,f))},flush:function(){return i.flush()}}},e}();t.Factory=E,t.factory=function(e){return void 0===e&&(e={}),new E(e)},t.manager=u.manager},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ok=t.object=t.defined=void 0;var r=n(11);t.defined=function(e,t){if(void 0===e)throw new r.AssertionError(t)},t.object=function(e,t){if(void 0!==e&&("object"!=typeof e||Array.isArray(e)||null===e))throw new r.AssertionError(t)},t.ok=function(e,t){if(!e)throw new r.AssertionError(t)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.getPublisher=t.resolvePublisher=t.postMessagePublisher=t.xhrPublisher=t.fetchPublisher=t.beaconPublisher=t.imagePublisher=void 0;var i=n(10),s=n(1),u=n(4),a=n(11),c=n(5),f=n(41),l=function(e){return e.useBatch?"POST":"GET"},d=function(e){return void 0===e&&(e={}),e._lv=u.LoggerVersion,e};function p(e){return void 0===e&&(e={}),function(t,n){void 0===n&&(n={});var r=i.buildBiUrl(e,t,n);return f.beaconTransport(r,t,!!n.useBatch).catch((function(){var e=l(n);return n.useBatch?f.fetchTransport(r,t,e).catch((function(n){return n instanceof a.APINotSupportedError?f.xhrTransport(r,t,e):Promise.reject(n)})):f.pixelTransport(r,n.image)}))}}function h(e,t){return void 0===e&&(e={}),function(n,r){void 0===r&&(r={});var o=i.buildBiUrl(e,n,r),s=l(r);return f.fetchTransport(o,n,s,t).catch((function(e){return e instanceof a.APINotSupportedError?f.xhrTransport(o,n,s):Promise.reject(e)}))}}function g(e,t){return void 0===e&&(e={}),function(e){return f.postMessageTransport(e,t)}}t.imagePublisher=function(e){return void 0===e&&(e={}),function(t,n){if(void 0===n&&(n={}),n.useBatch)throw new a.APINotSupportedError("Can't use image publisher to send batched events.");var r=i.buildBiUrl(e,t,n);return f.pixelTransport(r,n.image)}},t.beaconPublisher=p,t.fetchPublisher=h,t.xhrPublisher=function(e){return void 0===e&&(e={}),function(t,n){void 0===n&&(n={});var r=i.buildBiUrl(e,t,n),o=l(n);return f.xhrTransport(r,t,o)}},t.postMessagePublisher=g,t.resolvePublisher=function(e,t){var n,r;return e.publishMethod===c.PublishMethods.PostMessage?(n=g,r=t&&t[c.PublishMethods.PostMessage]):e.publishMethod===c.PublishMethods.Fetch?(n=h,r=t&&t[c.PublishMethods.Fetch]):n=s.isWebWorker()?h:p,n(e,r)},t.getPublisher=function(e,n,i){var s=t.resolvePublisher(e,i),u=function(e,t){t&&("function"!=typeof t&&t.postMessage&&e.publishMethod===c.PublishMethods.PostMessage?t=t.postMessage:"function"!=typeof t&&(t=null));var n=t?function(e){return t(d(e))}:d;return function(t,i){return i.useBatch?(t.e=t.e.map((function(t){var s=t.context,u=o(t,["context"]);return r(r({},u),{f:r(r({},n(u.f)),{_rp:s&&s.endpoint||i.endpoint||e.endpoint})})})),t):n(t)}}(e,n);return function(e,t){return s(u(e,t),t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postMessageTransport=t.xhrTransport=t.fetchTransport=t.pixelTransport=t.beaconTransport=void 0;var r=n(3),o=n(11);t.beaconTransport=function(e,t,n){return void 0===n&&(n=!1),new Promise((function(o,i){return r.sendBeacon(e,n?JSON.stringify(t):void 0)?o():i(new Error("Transport Error: Cannot send bi using beacon"))}))},t.pixelTransport=function(e,t){return new Promise((function(n,r){var o=t||new window.Image(0,0);o.onload=function(){return n()},o.onerror=function(){return r(new Error("Transport Error: Cannot send bi using pixel"))},o.src=e}))},t.fetchTransport=function(e,t,n,r){if(void 0===n&&(n="GET"),void 0===r){if("undefined"==typeof fetch)return Promise.reject(new o.APINotSupportedError("fetch"));r=fetch}var i={method:n,credentials:"include"};return"POST"===n?i.body=JSON.stringify(t):i.keepalive=!0,r(e,i).then((function(e){if(!e.ok)throw Error("Transport Error: Cannot send bi using fetch. Status: "+e.status)}))},t.xhrTransport=function(e,t,n){return void 0===n&&(n="GET"),new Promise((function(r,o){var i=new XMLHttpRequest;i.open(n,""+location.protocol+e),i.onload=r,i.onerror=function(){o(new Error("Transport Error: Cannot send bi using xhr."))},i.withCredentials=!0,"POST"===n?i.send(JSON.stringify(t)):i.send()}))},t.postMessageTransport=function(e,t){void 0===t&&(t=self.postMessage);var n=[e];return"undefined"==typeof WorkerGlobalScope&&n.push("*"),t.apply(self,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldMuteByCategory=t.shouldMuteNonEssentials=void 0;var r=n(43),o=n(5),i=new r.ConsentPolicyAccessor;t.shouldMuteNonEssentials=function(){var e=i.getCurrentConsentPolicy();return!1===e.functional||!1===e.analytics},t.shouldMuteByCategory=function(e){var n=i.getCurrentConsentPolicy();return e!==o.EventCategories.Essential&&(e===o.EventCategories.Functional||e===o.EventCategories.Analytics?!1===n[e]:t.shouldMuteNonEssentials())}},function(e,t,n){"use strict";n.r(t),n.d(t,"ConsentPolicyAccessor",(function(){return i}));var r=n(8),o=n(2),i=function(){function e(e){e&&(this.env=e),this.consentPolicyAccess=Object(r.a)(this.env)}return e.prototype.clearReference=function(){this.consentPolicyAccess&&this.consentPolicyAccess.deleteReference&&(this.consentPolicyAccess=void 0)},e.prototype.getCurrentConsentPolicy=function(){this.consentPolicyAccess||(this.consentPolicyAccess=Object(r.a)(this.env));var e=this.consentPolicyAccess&&this.consentPolicyAccess.getCurrentConsentPolicy()||o.a;return this.clearReference(),e.policy?e.policy:e},e.prototype.getConsentPolicyHeader=function(e){void 0===e&&(e=!1),this.consentPolicyAccess||(this.consentPolicyAccess=Object(r.a)(this.env));var t=this.consentPolicyAccess&&this.consentPolicyAccess._getConsentPolicyHeader()||{"consent-policy":""};return this.clearReference(),e?t["consent-policy"]:t},e}()},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCommonConfigValue=void 0;var r=n(1),o=n(4);t.getCommonConfigValue=function(e,t){return void 0===t&&(t=r.getGlobal((function(e){return e.Wix&&e.Wix.Utils&&e.Wix.Utils.commonConfig||e.commonConfig}))),(t=t&&"function"==typeof t.getAll?t.getAll():t)&&void 0!==t[e]?t[e]:o.DefaultCommonConfig[e]}},function(e,t,n){"use strict";var r=n(0),o=n(19),i=n(48),s=n(12);function u(e){var t=new i(e),n=o(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var a=u(s);a.Axios=i,a.create=function(e){return u(r.merge(s,e))},a.Cancel=n(23),a.CancelToken=n(62),a.isCancel=n(22),a.all=function(e){return Promise.all(e)},a.spread=n(63),e.exports=a,e.exports.default=a},function(e,t){e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,n){"use strict";var r=n(12),o=n(0),i=n(57),s=n(58);function u(e){this.defaults=e,this.interceptors={request:new i,response:new i}}u.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),(e=o.merge(r,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},o.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}})),o.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}})),e.exports=u},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var a,c=[],f=!1,l=-1;function d(){f&&a&&(f=!1,a.length?c=a.concat(c):l=-1,c.length&&p())}function p(){if(!f){var e=u(d);f=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a&&a[l].run();l=-1,t=c.length}a=null,f=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||f||u(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(21);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e}},function(e,t,n){"use strict";var r=n(0);function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(o(t)+"="+o(e))})))})),i=s.join("&")}return i&&(e+=(-1===e.indexOf("?")?"?":"&")+i),e}},function(e,t,n){"use strict";var r=n(0),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,s={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(s[t]&&o.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},function(e,t,n){"use strict";var r=n(0);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(0);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,s){var u=[];u.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),r.isString(o)&&u.push("path="+o),r.isString(i)&&u.push("domain="+i),!0===s&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(0);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},function(e,t,n){"use strict";var r=n(0),o=n(59),i=n(22),s=n(12),u=n(60),a=n(61);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.baseURL&&!u(e.url)&&(e.url=a(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return c(e),t.data=o(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(c(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(23);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";var r,o,i,s,u,a,c;function f(e){return void 0!==e.before&&void 0!==e.after}function l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function d(){return window.location.hostname.match(/editorx\.com$/)?"editorx.com":"wix.com"}n.r(t),n.d(t,"EditRegionsActions",(function(){return r})),n.d(t,"PageNames",(function(){return o})),n.d(t,"isBeforeAfterImageDescriptor",(function(){return f})),n.d(t,"FreeTextSize",(function(){return i})),n.d(t,"ClientIncomingMessageTypes",(function(){return s})),n.d(t,"ClientOutgoingMessageTypes",(function(){return u})),n.d(t,"CloseReason",(function(){return a})),n.d(t,"getRandomGuid4",(function(){return l})),n.d(t,"ClientErrorCodes",(function(){return c})),n.d(t,"getApiHostName",(function(){return d})),n.d(t,"getConfig",(function(){return C})),n.d(t,"feedbackDebugConfig",(function(){return x})),n.d(t,"feedbackProdConfig",(function(){return E})),n.d(t,"EditContentElementTypes",(function(){return y})),n.d(t,"FeedbackTypes",(function(){return b})),n.d(t,"QuestionJustifyContent",(function(){return w})),n.d(t,"ErrorLoggerConfigurator",(function(){return T})),n.d(t,"Severity",(function(){return O})),n.d(t,"getErrorBiParams",(function(){return j})),n.d(t,"OPENER_ERRORS",(function(){return B})),n.d(t,"CLIENT_ERRORS",(function(){return F})),n.d(t,"MenuElementType",(function(){return S})),n.d(t,"FirstLevelAnswerElementType",(function(){return I})),n.d(t,"AnswerJustifyContent",(function(){return k})),n.d(t,"parseSearch",(function(){return N})),n.d(t,"QuestionContentElementTypes",(function(){return L})),n.d(t,"OpenerEvent",(function(){return ke.OpenerEvent})),n.d(t,"OpenerEventTypes",(function(){return pe})),n.d(t,"OpenerEventClosed",(function(){return ke.OpenerEventClosed})),n.d(t,"CloseReasonType",(function(){return de})),n.d(t,"ShowOptions",(function(){return ke.ShowOptions})),n.d(t,"QuestionPageTheme",(function(){return D})),function(e){e.Add="add",e.Remove="remove",e.Move="move",e.Resize="resize"}(r||(r={})),function(e){e.Question="question",e.Edit="edit",e.ThankYou="thank_you",e.Error="error"}(o||(o={})),function(e){e.Small="small",e.Large="large"}(i||(i={})),function(e){e.OpenQuestion="AI_FEEDBACK.OPEN_QUESTION",e.BeforeShowIframe="AI_FEEDBACK.BEFORE_SHOW_IFRAME",e.ConsentPolicyChanged="AI_FEEDBACK.CONSENT_POLICY_CHANGED"}(s||(s={})),function(e){e.Ready="AI_FEEDBACK.READY",e.CloseFrame="AI_FEEDBACK.CLOSE_FRAME",e.LayoutIsReady="AI_FEEDBACK.LAYOUT_IS_READY",e.LayoutMountError="AI_FEEDBACK.LAYOUT_MOUNT_ERROR"}(u||(u={})),function(e){e.FinishedFlow="finished-flow",e.Canceled="canceled",e.CanceledDueToError="canceled-due-to-error"}(a||(a={})),function(e){e.LayoutMountFailed="layout-mount-failed",e.LayoutMountFailedByTimeout="layout-mount-failed-by-timeout",e.ImageLoadFailed="image-load-failed",e.WrongShowParams="wrong-show-params"}(c||(c={}));var p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function h(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{a(r.next(e))}catch(e){i(e)}}function u(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,u)}a((r=r.apply(e,t||[])).next())}))}function g(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,u=i.length;s<u;s++,o++)r[o]=i[s];return r}var y,b,w,E={FEEDBACK_SERVICE_BASE_URL:"https://media-feedback."+d()+"/_api/feedback"},x={FEEDBACK_SERVICE_BASE_URL:"https://media-feedback-test."+d()+"/_api/feedback"},_=p(p({},x),{AI_FEEDBACK_PAGE_URL:"https://local.wix.com:3003",EXPOSURE_SERVICE_BASE_URL:"https://media-feedback-test."+d()+"/_api/exposure"});function C(e){void 0===e&&(e=!1);var t,n="";return window.consentPolicyManager&&(n=Object.entries(window.consentPolicyManager._getConsentPolicyHeader()).reduce((function(e,t){return v(e,[t[0]+"="+t[1]])}),[]).join("&")),e?p(p({},_),{AI_FEEDBACK_PAGE_URL:_.AI_FEEDBACK_PAGE_URL+"?"+n}):(window.consentPolicyManager&&(t=window.consentPolicyManager._getConsentPolicyHeader()),p(p({},E),{AI_FEEDBACK_PAGE_URL:"https://manage."+d()+"/user-feedback-client"+(t?"?"+n:""),EXPOSURE_SERVICE_BASE_URL:"https://media-feedback."+d()+"/_api/exposure"}))}!function(e){e.RegionsEditor="regions-editor",e.RegionsSelection="regions-selection",e.TwoImagesToggle="two-images-toggle"}(y||(y={})),function(e){e.Question="question",e.Edit="edit",e.QuestionWithEdit="question-with-edit"}(b||(b={})),function(e){e.Start="start",e.Center="center",e.End="end"}(w||(w={}));var O,P=function(){function e(e){this.handlers=[],this.handlers=e}return e.prototype.log=function(e,t){this.handlers.forEach((function(n){return n(e,t)}))},e.prototype.createLoggingHandler=function(e,t){var n=this;return function(r){return n.log(e,p({reason:r},t)),Promise.reject(r)}},e}(),T=function(){function e(e){void 0===e&&(e=[]),this.handlers=[],this.handlers=v(e)}return e.prototype.addErrorHandler=function(t){return new e(v(this.handlers,[t]))},e.prototype.createLogger=function(){return new P(this.handlers)},e}();!function(e){e[e.RECOVERABLE=10]="RECOVERABLE",e[e.WARNING=20]="WARNING",e[e.ERROR=30]="ERROR",e[e.FATAL=40]="FATAL"}(O||(O={}));var A=n(13);var S,I,k,R=function(e){var t;if(e)return e instanceof Error?(e.name||"Error")+": '"+e.message+"'":"object"==typeof(t=e)&&null!==t&&"string"==typeof t.code&&"string"==typeof t.message?"Client error: "+e.code+". Message: "+e.message:Object(A.stringify)(e)},M=function(e){return String(e).slice(0,900)},j=function(e,t){return void 0===t&&(t={}),{errc:e.id,errn:e.name,sev:e.level||O.ERROR,extra:M(Object(A.stringify)(t.extra)),errorMessage:M(R(t.reason))}},B={opener:{experimentLoad:{id:1e3,name:"opener.experimentLoad",severity:O.FATAL},iframeLoad:{id:1001,name:"opener.iframeLoad",severity:O.FATAL},exposureRequest:{id:1002,name:"opener.exposureRequest",severity:O.FATAL}},openerHandlers:{layoutMountError:{id:1100,name:"openerHandlers.layoutMountError",severity:O.FATAL},layoutIsReadyHasNoFeedbackWindow:{id:1101,name:"openerHandlers.layoutIsReadyHasNoFeedbackWindow",severity:O.FATAL}}},F={feedbackSubmit:{submitError:{id:5e3,name:"feedbackSubmit.submitError",severity:O.RECOVERABLE}},iframeTransport:{sendMessage:{id:5100,name:"iframeTransport.sendMessage",severity:O.FATAL}},optOut:{disableQuestion:{id:5200,name:"optOut.disableQuestion",severity:O.RECOVERABLE}},lifecycle:{closeWindowFromRoot:{id:5300,name:"lifecycle.closeWindowFromRoot",severity:O.ERROR},noMatchPageWasShown:{id:5301,name:"lifecycle.noMatchPageWasShown",severity:O.ERROR},reactAppCatchError:{id:5302,name:"lifecycle.reactAppCatchError",severity:O.ERROR}}};!function(e){e.Multichoice="multichoice",e.FreeText="free-text",e.GoToEditPage="go-to-edit-page"}(S||(S={})),function(e){e.Options="firstlevel-options",e.OptionsWithEdit="firstlevel-options-with-edit",e.OptionsWithCustomEdit="firstlevel-options-with-custom-edit",e.Multichoice="firstlevel-multichoice",e.MultichoiceWithEdit="firstlevel-multichoice-with-edit",e.FreeText="firstlevel-free-text",e.ImageTags="firstlevel-image-tags"}(I||(I={})),function(e){e.Start="start",e.Center="center",e.End="end"}(k||(k={}));var L,D,U,N=function(e){void 0===e&&(e="");var t={};return e?(/^[?#]/.test(e)?e.slice(1):e).split("&").reduce((function(e,t){var n=t.split("="),r=n[0],o=n[1];return r&&o&&(e[decodeURIComponent(r)]=decodeURIComponent(o)),e}),t):t};!function(e){e.Image="image",e.ImageWithRegions="image-with-regions",e.ImageCompareSlider="image-compare-slider"}(L||(L={})),function(e){e.Blue="blue",e.Light="light"}(D||(D={})),function(e){e.Default="",e.OwnerAccount="owner-account"}(U||(U={}));var W="__WIXEXP_USE_NEW_API",H="__WIXEXP_CONDUCTION_METHOD_",Q="__WIXEXP_OWNER_ACCOUNT_ID_",V="__WIXEXP_LOGGED_IN_USER_ID_";function q(e,t,n){var r,o;if("undefined"!=typeof self)if("function"==typeof n){if(void 0!==n(self[t]))return(r={})[e]=n(self[t]),r}else if(typeof self[t]===n)return(o={})[e]=self[t],o;return{}}var G=function(e){return Object.keys(U).filter((function(t){return U[t]===e})).length>0?e:void 0};function z(e){return function(e){return e.conductionMethod===U.OwnerAccount&&e.siteOwnerId&&e.loggedInUserId}(e)?{forSiteOwner:{siteOwnerId:e.siteOwnerId,loggedInUserId:e.loggedInUserId}}:{}}var X=function(e){return"string"==typeof e&&""!==e};function K(e){void 0===e&&(e={});var t=e.forSiteOwner,n=e.forSiteVisitors,r=e.overrideCriteria,o="";if(["forSiteOwner","forSiteVisitors"].reduce((function(t,n){return e[n]?t+1:t}),0)>1)throw new Error('Only one of "forSiteOwner" or "forSiteVisitors" is accepted.');return t&&(o+=function(e){return X(e.loggedInUserId)&&X(e.siteOwnerId)?"&requestContext.forSiteOwner.loggedInUserId="+e.loggedInUserId+"&requestContext.forSiteOwner.siteOwnerId="+e.siteOwnerId:""}(t)),n&&(o+=function(e){return X(e.visitorId)&&X(e.siteOwnerId)?"&requestContext.forSiteVisitors.visitorId="+e.visitorId+"&requestContext.forSiteVisitors.siteOwnerId="+e.siteOwnerId:""}(n)),r&&(o+=function(e){return X(e.entityId)?"&requestContext.overrideCriteria.entityId="+e.entityId:""}(r)),o}function J(e){if("string"==typeof e)try{return JSON.parse(e)}catch(e){}return e}var Y={conductAllInScope:"/_api/wix-laboratory-server/v1/laboratory/platform/conductAllInScope",conductExperiment:"/_api/wix-laboratory-server/v1/laboratory/platform/conductExperiment"},$={conductAllInScope:"/_api/wix-laboratory-server/laboratory/conductAllInScope",conductExperiment:"/_api/wix-laboratory-server/laboratory/conductExperiment"};function Z(e,t){return-1!==e.indexOf(t?Y.conductAllInScope:$.conductAllInScope)}var ee=function(e,t,n){return void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=!1),n?Y.conductExperiment+"?key="+encodeURIComponent(e)+"&fallbackValue="+encodeURIComponent(t):$.conductExperiment+"?key="+encodeURIComponent(e)+"&fallback="+encodeURIComponent(t)};function te(e,t,n){var r=""+ee(t,"",n);return e.includes(r)}var ne=function(){function e(){this.urlMap=new Map}return e.prototype.addUrlResponse=function(e,t){this.urlMap.set(e,t)},e.prototype.getUrlResponse=function(e){return this.urlMap.get(e)},e.prototype.getExperimentValue=function(e,t){var n,r;try{for(var o=m(this.urlMap.keys()),i=o.next();!i.done;i=o.next()){var s=i.value;if(te(s,e,t))return this.urlMap.get(s);if(Z(s,t)){var u=J(this.urlMap.get(s));if("object"==typeof u&&e in u)return u[e]}}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e}();!function(){function e(){}e.prototype.addUrlResponse=function(){},e.prototype.getUrlResponse=function(){},e.prototype.getExperimentValue=function(){}}();function re(){return void 0===self.experimentsCache&&(self.experimentsCache=new ne),self.experimentsCache}var oe=function(){},ie=function(){function e(e){void 0===e&&(e={});var t=p(p(p(p({},q("useNewApi",W,"boolean")),q("conductionMethod",H,G)),q("siteOwnerId",Q,"string")),q("loggedInUserId",V,"string"));this.useNewApi=void 0!==e.useNewApi?e.useNewApi:t.useNewApi||!1,this.experiments=e.experiments||{},this.loaders=new Map,this.baseUrl=(this.useNewApi,e.baseUrl||""),this.requestContext=e.requestContext||z(t),this.onError=e.onError||oe,e.scope&&this.load(e.scope),e.scopes&&e.scopes.forEach(this.load.bind(this))}return e.prototype.add=function(e){this.experiments=p(p({},this.experiments),e)},e.prototype.get=function(e){return this.experiments[e]},e.prototype.enabled=function(e){return"true"===this.get(e)},e.prototype.all=function(){return this.experiments},e.prototype._addLoader=function(e,t){var n=this;return this.loaders.set(e,t),t.then((function(){n.loaders.delete(e)})),t},e.prototype._getUrlWithFallback=function(e,t){var n=this,r=re().getUrlResponse(e);if(void 0!==r)return Promise.resolve(r);var o=this.loaders.get(e);return void 0!==o?o:function(e){return new Promise((function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="text",r.withCredentials=!0,r.onload=function(){r.status>=200&&r.status<400?t(r.responseText):n(new Error("Failed to load "+e+", status "+r.status))},r.onerror=function(){return n(new Error("Failed to load "+e))},r.send()}))}(e).then((function(t){return re().addUrlResponse(e,t),t})).catch((function(e){return n.onError(e),t}))},e.prototype.load=function(e){var t=this,n=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=!1),t?Y.conductAllInScope+"?scope="+encodeURIComponent(e):$.conductAllInScope+"?scope="+encodeURIComponent(e)}(e,this.useNewApi),r=this.useNewApi?K(this.requestContext):"",o=""+this.baseUrl+n+r,i=this._getUrlWithFallback(o,{}).then(J).then((function(e){return t.useNewApi?e.values:e})).then((function(e){return t.add(e),e}));return this._addLoader(o,i)},e.prototype.conduct=function(e,t){var n=this,r=re().getExperimentValue(e,this.useNewApi);if(void 0!==r)return this._addConductResult(e,r);var o=ee(e,t,this.useNewApi),i=this.useNewApi?K(this.requestContext):"",s=""+this.baseUrl+o+i,u=this._getUrlWithFallback(s,t).then((function(t){return n._addConductResult(e,t)}));return this._addLoader(s,u)},e.prototype.pending=function(){return!!this.loaders.size},e.prototype.ready=function(){return Promise.all(Array.from(this.loaders.values()))},e.prototype._addConductResult=function(e,t){var n,r=this.useNewApi?JSON.parse(t).value:t;return this.add(((n={})[e]=r,n)),Promise.resolve(r)},e}(),se=n(24),ue=n.n(se);function ae(e,t){var n=t.config,r=n.FEEDBACK_SERVICE_BASE_URL,o=n.EXPOSURE_SERVICE_BASE_URL,i=t.options,s=i.locale,u=i.siteToken,a=i.metasiteId,c=i.origin,f=t.sessionId,l=t.categoryId,d=e.customContext,p=e.noDontShowAgain,h=e.questionId,g=e.triggerEvent,m=e.feedbackModel,v=e.thankYouPage,y=e.initiator;return{windowConfig:{locale:s,disableDontShowAgain:p,documentationLink:e.documentationLink},flowConfig:{thankYouPage:v},questionContext:{categoryId:l,customContext:d,initiator:y,metasiteId:a,origin:c,questionId:h,sessionId:f,siteToken:u,triggerEvent:g},questionModel:m,topologyConfig:{exposureServiceBaseUrl:o,feedbackServiceBaseUrl:r}}}function ce(e,t){var n=t.startOpeningTime;return{meta:{startOpeningTime:void 0===n?(new Date).getTime():n,experiments:t.experiments},payload:ae(e,t)}}function fe(e){return e.replace(/^_template_/,"")}function le(e){void 0===e&&(e={});var t=ue.a.factory({endpoint:"feedback-service"}).updateDefaults(e).logger();return{log:function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return e&&e.metasiteId&&(e=p(p({},e),{metasiteId:fe(e.metasiteId)})),t.log.apply(t,v([e],n))}}}var de,pe,he=le({src:94}),ge=n(7),me=function(){function e(e,t){var n=this;this.targetFrame=e,this.options=t,this.messagesEmitter=new ge.EventEmitter,this.handleMessage=function(e){if(n.getTargetOrigin().includes(e.origin)){var t=function(e){return e.data}(e),r=t.type,o=t.data;n.messagesEmitter.emit(r,o)}},window.addEventListener("message",this.handleMessage)}return e.prototype.getTargetOrigin=function(){return this.options.targetOrigin},e.prototype.destroy=function(){this.messagesEmitter.removeAllListeners(),window.removeEventListener("message",this.handleMessage)},e.prototype.sendMessage=function(e){var t=this.targetFrame.contentWindow;if(!t)throw Error('can not send message "'+JSON.stringify(e)+'", no contentWindow');t.postMessage(e,this.getTargetOrigin())},e.prototype.waitForMessage=function(e){var t=this;return new Promise((function(n){t.messagesEmitter.once(e,(function(e){n(e)}))}))},e.prototype.addListener=function(e,t){this.messagesEmitter.addListener(e,t)},e}();!function(e){e.FinishedFlow="finished-flow",e.Canceled="canceled",e.CanceledDueToError="canceled-due-to-error",e.ClosedByOpener="closed-by-opener"}(de||(de={})),function(e){e.Opened="opened",e.Closed="closed",e.Error="error"}(pe||(pe={}));var ve,ye=n(25),be=n.n(ye),we=function(){function e(e,t){this.siteToken=t,this.transport=be.a.create({withCredentials:!0,baseURL:e.EXPOSURE_SERVICE_BASE_URL})}return e.prototype.getShouldAskQuestion=function(e){return this.transport.get("f/"+e+"?siteToken="+this.siteToken).then((function(e){return e.data.payload})).catch((function(e){var t;throw 401===(null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.status)&&"http:"===window.location.protocol&&console.warn("ATTENTION! If server complains on missing xsrf token (401 error) this is most probably because you are opening site over non-secure connection.\nFind more information on how this can be fixed \u2014 in comment section below code where this warning is called"),e}))},e}();!function(e){e.None="none",e.Opening="opening",e.Shown="shown"}(ve||(ve={}));function Ee(e,t,n){return h(this,void 0,Promise,(function(){var r,o,i,s,u;return g(this,(function(a){switch(a.label){case 0:return n.disableExposure?[2,{shouldExpose:!0}]:[4,e.getShouldAskQuestion(n.questionId)];case 1:return r=a.sent(),o=r.shouldExpose,i=r.categoryId,s=r.unExposedReason,u=t(i),c=p(p(p({},u),{isAllowed:o}),o?{}:{blockReason:s}),he.log(p(p({},c),{evid:815})),[2,r]}var c}))}))}function xe(e){return e.then((function(e){return{isError:!1,result:e}}),(function(e){return{isError:!0,error:e}}))}function _e(e){return e.then((function(e){return e.isError?Promise.reject(e.error):Promise.resolve(e.result)}))}var Ce=function(){function e(e,t,n){var r=document.createElement("iframe");r.src=e,r.id="userFeedback",r.title=t,r.setAttribute("style","position: fixed; top: 0; left: 0; z-index: 6001; width: 100%; height: 100%; border: 0; background: rgba(255, 255, 255, 0.8);"),r.style.display="none",n.appendChild(r),this.iframe=r}return e.prototype.show=function(){this.iframe.style.display="block";var e=this.iframe.contentWindow;e&&e.focus&&e.focus()},e.prototype.hide=function(){this.iframe.style.display="none"},e.prototype.destroy=function(){var e=this.iframe.parentNode;e&&e.removeChild(this.iframe)},Object.defineProperty(e.prototype,"wrappedIFrame",{get:function(){return this.iframe},enumerable:!1,configurable:!0}),e}(),Oe=[];function Pe(e){Oe.push(p(p({},e),{time:new Date}))}var Te=le({src:94,evid:837});function Ae(e){switch(e){case a.Canceled:return de.Canceled;case a.FinishedFlow:return de.FinishedFlow;case a.CanceledDueToError:return de.CanceledDueToError;default:return de.Canceled}}var Se={debug:!1};var Ie=function(){function e(e,t){var n,r=this;void 0===t&&(t=Se),this.messagesEmitter=new ge.EventEmitter,this.currentQuestion={state:ve.None},this.feedbackWindow=void 0,this.loadExperimentsBag=function(){return r.experiments.ready().then((function(){return r.experiments.all()}))},this.loadExperimentsBagWithLogging=function(e){var t=r.getBiDefaultParams(e)(void 0);return r.loadExperimentsBag().catch(r.errorLogger.withDefaultBi(t).createLoggingHandler(B.opener.experimentLoad))},this.handleConsentPolicyChanged=function(){window.consentPolicyManager&&r.feedbackWindow&&r.feedbackWindow.transport.sendMessage({type:s.ConsentPolicyChanged,data:window.consentPolicyManager.getCurrentConsentPolicy().policy})},this.emitErrorAndResetState=function(e){return function(t){r.currentQuestion={state:ve.None},r.emitMessage({type:pe.Error,showOptions:e,error:t})}},this.sendOpenQuestionMessage=function(e){var t=e.feedbackWindow,n=e.showOptions,o=e.sessionId,i=e.startOpeningTime,u=e.categoryId,a=e.experimentsBag;Pe({message:"Opener sends 'OpenQuestion' message",data:n}),t.transport.sendMessage({type:s.OpenQuestion,data:ce(n,{config:r.config,options:r.options,sessionId:o,startOpeningTime:i,categoryId:u,experiments:a})})},this.sendBeforeShowMessage=function(e){var t=v(Oe);Oe=[],e.transport.sendMessage({type:s.BeforeShowIframe,data:{openerBreadcrumbs:t}})},this.getBiDefaultParams=function(e){var t=e.sessionId,n=e.showOptionsComplete;return function(e){var o=n.questionId,i=n.triggerEvent,s=n.initiator;return p({sessionId:t,initiatorName:s,metasiteId:r.options.metasiteId,questionId:o,trigger:i,origin:r.options.origin},e?{categoryId:e}:{})}},this.unmuteIframePromiseWithLogging=function(e,t){return _e(e).catch(r.errorLogger.withDefaultBi(r.getBiDefaultParams(t)(void 0)).createLoggingHandler(B.opener.iframeLoad))},this.getShouldExposeWithLogging=function(e,t,n){return function(e,t){return"true"===t["specs.user-feedback.DisableExposure"]?Promise.resolve({shouldExpose:!0}):e}(_e(e),t).catch(r.errorLogger.withDefaultBi(r.getBiDefaultParams(n)(void 0)).createLoggingHandler(B.opener.iframeLoad))},this.errorLogger=(n=new T,{withDefaultBi:function(e){return n.addErrorHandler((function(t,n){Te.log(p(p({},e),j(t,n)))})).createLogger()}}),this.options=e,this.config=function(e){var t=e.debug;return t?!0===t?C(!0):p(p({},C(!0)),t):C()}(t),this.exposureService=new we(this.config,this.options.siteToken),this.experiments=new ie}return e.prototype.getFeedbackConfigUrl=function(){return this.config.AI_FEEDBACK_PAGE_URL},e.prototype.getURL=function(){var e=this.getFeedbackConfigUrl(),t=window.commonConfig?encodeURIComponent(JSON.stringify(window.commonConfig)):void 0,n=t?(e.includes("?")?"&":"?")+"commonConfig="+t:"";return""+e+n},e.prototype.init=function(){var e=this;Pe({message:"Opener is initializing iframe and transport"});var t,n,r=new Ce(this.getURL(),"Some title",this.options.appendTo||document.body),i=(t=r.wrappedIFrame,n={targetOrigin:this.config.AI_FEEDBACK_PAGE_URL},new me(t,n));document.addEventListener("consentPolicyChanged",this.handleConsentPolicyChanged);var c,f,l,d={iframe:r,transport:i,loadPromise:xe((c=1e4,f=function(){return new Error("Iframe haven't sent READY message within given timeout.")},l=i.waitForMessage(u.Ready),new Promise((function(e,t){var n=setTimeout((function(){t(f())}),c);l.then((function(t){clearTimeout(n),e(t)})).catch((function(e){clearTimeout(n),t(e)}))}))))};return this.experiments.load("user-feedback"),i.addListener(u.Ready,(function(){var t;(Pe({message:"Opener received 'Ready' message (iframe reload handler)"}),e.currentQuestion.state===ve.Shown)&&(t=e.getBiDefaultParams(e.currentQuestion)(void 0),he.log(p(p({},t),{evid:842})),e.feedbackWindow&&(Pe({message:"Opener hides iframe (iframe reload handler)"}),e.feedbackWindow.iframe.hide(),e.currentQuestion={state:ve.Opening,showOptions:e.currentQuestion.showOptions,showOptionsComplete:e.currentQuestion.showOptionsComplete,sessionId:e.currentQuestion.sessionId},Pe({message:"Opener sends 'OpenQuestion' message (iframe reload handler)",data:e.currentQuestion.showOptions}),i.sendMessage({type:s.OpenQuestion,data:ce(e.currentQuestion.showOptionsComplete,{config:e.config,options:e.options,sessionId:e.currentQuestion.sessionId,experiments:e.experiments.all()})})))})),i.addListener(u.LayoutIsReady,(function(){if(Pe({message:"Opener received 'LayoutIsReady' message"}),e.currentQuestion.state!==ve.None){var t,n=e.getBiDefaultParams(e.currentQuestion)(void 0);if(t=n,he.log(p(p({},t),{evid:844})),e.feedbackWindow){var o=e.currentQuestion,i=o.showOptions,s=o.showOptionsComplete,u=o.sessionId;e.currentQuestion={state:ve.Shown,showOptions:i,showOptionsComplete:s,sessionId:u},Pe({message:"Opener shows iframe",data:i}),e.sendBeforeShowMessage(e.feedbackWindow),function(e){he.log(p(p({},e),{evid:845}))}(n),r.show(),e.emitMessage({type:pe.Opened,showOptions:i})}else e.errorLogger.withDefaultBi(n).log(B.openerHandlers.layoutIsReadyHasNoFeedbackWindow)}})),i.addListener(u.LayoutMountError,(function(t){if(Pe({message:"Opener received 'LayoutMountError' message",data:{error:t}}),e.currentQuestion.state===ve.Opening){var n=e.getBiDefaultParams(e.currentQuestion)(void 0);e.errorLogger.withDefaultBi(n).log(B.openerHandlers.layoutMountError,{reason:t}),e.emitErrorAndResetState(e.currentQuestion.showOptions)(t)}})),i.addListener(u.CloseFrame,(function(t){if(Pe({message:"Opener received 'CloseFrame' message",data:{result:t}}),e.currentQuestion.state!==ve.None){var n=e.getBiDefaultParams(e.currentQuestion)(void 0);r=p(p({},n),{closeReason:Ae(t.type)}),he.log(p(p({},r),{evid:846}))}var r,i,s=e.currentQuestion.state===ve.None?void 0:e.currentQuestion,u=(i=s?e.getBiDefaultParams(s)(void 0):void 0,function(e){i&&he.log(p(p({},i),{pageName:e,evid:803}))});switch(t.type){case a.FinishedFlow:return Boolean(t.flowConfig&&t.flowConfig.thankYouPage)&&u(o.ThankYou),void e.hideByClose({closeReason:de.FinishedFlow,questionResult:t.data});case a.Canceled:return u(o.Question),void e.hideByClose({closeReason:de.Canceled});case a.CanceledDueToError:return u(o.Error),e.currentQuestion.state!==ve.None&&e.emitMessage({type:pe.Closed,showOptions:e.currentQuestion.showOptions,closeEventPayload:{closeReason:de.CanceledDueToError}}),void e.destroy();default:return void e.hideByClose({closeReason:de.Canceled})}})),d},e.prototype.hideByClose=function(e){if(this.feedbackWindow&&this.currentQuestion.state!==ve.None){var t;t=this.getBiDefaultParams(this.currentQuestion)(void 0),he.log(p(p({},t),{evid:843})),Pe({message:"Opener hides iframe"}),this.feedbackWindow.iframe.hide();var n=this.currentQuestion.showOptions;this.currentQuestion={state:ve.None},this.emitMessage({type:pe.Closed,showOptions:n,closeEventPayload:e})}},e.prototype.emitMessage=function(e){this.messagesEmitter.emit(e.type,e)},e.prototype.preload=function(){var e;e={metasiteId:this.options.metasiteId,origin:this.options.origin,sessionId:this.currentQuestion.state===ve.None?"no-session":this.currentQuestion.sessionId},he.log(p(p({},e),{evid:838})),Pe({message:"'preload' was called"}),this.feedbackWindow||(this.feedbackWindow=this.init())},e.prototype.closeFeedbackWindow=function(){Pe({message:"'closeFeedbackWindow' was called"}),this.hideByClose({closeReason:de.ClosedByOpener})},e.prototype.destroy=function(){var e;if(e={metasiteId:this.options.metasiteId,origin:this.options.origin,sessionId:this.currentQuestion.state===ve.None?"no-session":this.currentQuestion.sessionId},he.log(p(p({},e),{evid:841})),Pe({message:"'destroy' was called"}),this.currentQuestion={state:ve.None},this.feedbackWindow){var t=this.feedbackWindow,n=t.iframe,r=t.transport;n.destroy(),document.removeEventListener("consentPolicyChanged",this.handleConsentPolicyChanged);try{r.destroy()}finally{this.feedbackWindow=void 0}}},e.prototype.addListener=function(e,t){return Pe({message:"'addListener' was called"}),this.messagesEmitter.addListener(e,t)},e.prototype.showQuestion=function(e){var t=this,n=function(e){var t=e.initiator;if(void 0===t)throw new Error('"initiator" parameter is required. Pass it via constructor or via showQuestion method');return{initiator:t}}(p(p({},this.options),e)),r=void this.options;if(r)this.emitMessage(r);else{var o=p(p({},e),n);if(this.currentQuestion.state===ve.None){var i,s=(new Date).getTime(),u={state:ve.Opening,showOptions:e,showOptionsComplete:o,sessionId:l()};this.currentQuestion=u,i=this.getBiDefaultParams(u)(void 0),he.log(p(p({},i),{evid:840})),Pe({message:"'showQuestion' was called",data:e});var a=this.feedbackWindow||(this.feedbackWindow=this.init()),c=xe(Ee(this.exposureService,this.getBiDefaultParams(u),e));Promise.all([this.loadExperimentsBagWithLogging(u),this.unmuteIframePromiseWithLogging(this.feedbackWindow.loadPromise,u)]).then((function(e){var n=e[0];return t.getShouldExposeWithLogging(c,n,u).then((function(e){var r=e.shouldExpose,i=e.categoryId;Pe({message:"'showQuestion' function received all required data",data:{shouldExpose:r}}),r?(!function(e){he.log(p(p({},e),{evid:801}))}(p({},t.getBiDefaultParams(u)(i))),t.sendOpenQuestionMessage({feedbackWindow:a,sessionId:u.sessionId,categoryId:i,experimentsBag:n,showOptions:o,startOpeningTime:s})):t.currentQuestion={state:ve.None}}))})).catch(this.emitErrorAndResetState(e))}else this.emitMessage({type:pe.Error,showOptions:e,error:new Error("Cannot show question while another question is being opened. Try to close active question before showing new one.")})}},e}(),ke=n(6);t.default=Ie}])}));
//# sourceMappingURL=UserFeedbackOpener.bundle.min.js.map