!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://static.parastorage.com/services/media-frame/1.702.0/",n(n.s=2)}([function(e,t){},,function(e,t,n){"use strict";n.r(t),n.d(t,"mediaFrame",(function(){return k}));var i=function(){function e(){this.queue=[]}return e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.queue.push({type:"log",args:e})},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.queue.push({type:"info",args:e})},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.queue.push({type:"warn",args:e})},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.queue.push({type:"error",args:e})},e.prototype.drain=function(e){this.queue.forEach((function(t){var n=t.type,i=t.args;e[n].apply(e,i)})),this.queue=[]},e}(),r=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i},o=function(){function e(t){var n=this;this.log=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];(e=n.impl).log.apply(e,r([n.serviceName],t))},this.info=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];(e=n.impl).info.apply(e,r([n.serviceName],t))},this.warn=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];(e=n.impl).warn.apply(e,r([n.serviceName],t))},this.error=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];(e=n.impl).error.apply(e,r([n.serviceName],t))},this.switchToRealtime=function(){n.impl=console},this.serviceName=t,e.instances.push(this),this.impl=e.queueImpl}return e.switchAllToRealtime=function(){e.queueImpl.drain(console),e.instances.forEach((function(e){return e.switchToRealtime()}))},e.instances=[],e.queueImpl=new i,e}(),s=function(e){var t=e.ctrlKey,n=e.shiftKey,i=e.metaKey;[t||i,e.altKey,n,76===e.keyCode].every(Boolean)&&(o.switchAllToRealtime(),a())},a=function(){return window.removeEventListener("keydown",s,!1)},u=function(){function e(e,t){void 0===t&&(t=new o("WindowMessenger")),this.handlerDescriptions=[],this.logger=t,this.targetWindow=e,window.addEventListener("message",this.handleMessage.bind(this),!1)}return e.prototype.setTarget=function(e){this.targetWindow=e},e.prototype.on=function(e,t){this.handlerDescriptions.push({event:e,fn:t,once:!1})},e.prototype.one=function(e,t){this.handlerDescriptions.push({event:e,fn:t,once:!0})},e.prototype.off=function(e,t){this.handlerDescriptions=this.handlerDescriptions.filter((function(n){return!(n.event===e&&(n.fn===t||!t))}))},e.prototype.emit=function(e,t){if(void 0===t&&(t=null),this.logger.log("postMessage emitted",e,t),!this.targetWindow)throw new Error("target window should be defined");this.targetWindow.postMessage(JSON.stringify({data:t,event:e}),"*")},e.prototype.handleMessage=function(e){if(e.source===this.targetWindow){var t=this.parseMessageData(e.data);null!==t&&(this.logger.log("postMessage received",t),this.handlerDescriptions.filter((function(e){return e.event===t.event})).forEach(this.runObserver(e,t.data)))}},e.prototype.runObserver=function(e,t){var n=this;return function(i){i.fn.call(e,t),i.once&&n.off(i.event,i.fn)}},e.prototype.parseMessageData=function(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(e){return null}},e}(),c=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};var l=function(e){var t=function(){var e="";return window.consentPolicyManager&&(e=Object.entries(window.consentPolicyManager._getConsentPolicyHeader()).reduce((function(e,t){var n=t[0],i=t[1];return c(e,[n+"="+i])}),[]).join("&")),e}(),n=window.commonConfig?encodeURIComponent(JSON.stringify(window.commonConfig)):void 0,i=n?"&commonConfig="+n:"",r=function(e){var t=document.createElement("a");return t.href=e,t.href}(e.mediaGalleryBaseHost+"index.html?locale="+e.i18nCode+(t?"&"+t:"")+i);return e.siteMediaToken?r+"&msid="+function(e){var t=e?e.split(".")[2]:null,n=t?atob(t):"{}";try{var i=JSON.parse(n);return JSON.parse(i.data)}catch(e){return{}}}(e.siteMediaToken||"").metasiteId:e.metaSiteToken?r+"&msid="+function(e){var t=e?e.split(".")[1]:null,n=t?atob(t):"{}";try{return JSON.parse(n)}catch(e){return{}}}(e.metaSiteToken||"").metaSiteId:r};var f,h=function(){function e(e){var t=this;this.logger=e,this.messenger=new u,this.handleConsentPolicyChanged=function(){if(window.consentPolicyManager){var e=window.consentPolicyManager.getCurrentConsentPolicy().policy;t.messenger.emit("consentPolicyChanged",e)}}}return e.prototype.getMessenger=function(){return this.messenger},e.prototype.show=function(e,t){var n=this,i=t.displayOnReady,r=l(e);return this.iframe&&this.iframe.src===r?this.sendSettings(e).then((function(){i&&n.showIframe()})):this.createIframe({appendTo:e.appendTo,src:r}).then((function(){return n.show(e,{displayOnReady:i})}))},e.prototype.hide=function(){this.iframe&&(this.messenger.emit("empty"),this.hideIframe())},e.prototype.kill=function(){this.iframe&&this.iframe.parentNode&&(this.iframe.parentNode.removeChild(this.iframe),this.iframe=void 0,document.removeEventListener("consentPolicyChanged",this.handleConsentPolicyChanged),this.logger.log("iFrame killed"))},e.prototype.sendSettings=function(e){var t,n=this;return this.messenger.emit("settings",e),t=new Promise((function(e){n.messenger.one("settingsReady",(function(){return n.logger.log("iFrame settings are applied"),e()}))})),Promise.race([t,new Promise((function(e){return setTimeout((function(){return e()}),1500)}))])},e.prototype.createIframe=function(e){var t=this,n=e.appendTo,i=void 0===n?"body":n,r=e.src;this.iframe&&this.kill(),this.iframe=document.createElement("iframe"),this.iframe.id="mediaGalleryFrame",this.iframe.style.border="none",this.hideIframe(),this.iframe.src=r;var o=document.querySelector(i);if(!o)throw new Error("Cannot find element by selector '"+i+"'");return o.appendChild(this.iframe),this.logger.log("iFrame created",this.iframe),this.iframe.contentWindow&&this.messenger.setTarget(this.iframe.contentWindow),document.addEventListener("consentPolicyChanged",this.handleConsentPolicyChanged),new Promise((function(e){t.messenger.one("ready",(function(){t.logger.log("iFrame is ready"),e()}))}))},e.prototype.hideIframe=function(){this.iframe&&(this.iframe.style.display="none")},e.prototype.showIframe=function(){this.iframe&&(this.iframe.style.display="block",this.iframe.contentWindow&&this.iframe.contentWindow.focus())},e}(),p=function(){return(p=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},d=function(){function e(e){this.defaultSettings=e,this.version="1.702.0",this.logger=new o("MediaFrame"),this.iframeManager=new h(this.logger),this.messenger=this.iframeManager.getMessenger(),this.on("close",this.close.bind(this)),this.on("items",this.close.bind(this))}return e.prototype.on=function(e,t){return this.messenger.on(e,t),this},e.prototype.one=function(e,t){return this.messenger.one(e,t),this},e.prototype.off=function(e,t){return this.messenger.off(e,t),this},e.prototype.open=function(e){return e=this.__mergeDefaultSettings(e),this.logger.log("show with settings",e),this.iframeManager.show(e,{displayOnReady:!0}),this},e.prototype.warmup=function(e){var t=this.__mergeDefaultSettings(p(p({siteMediaToken:null},e),{path:"empty"}));return this.iframeManager.show(t,{displayOnReady:!1}),this},e.prototype.close=function(){return this.iframeManager.hide(),this},e.prototype.kill=function(){this.iframeManager.kill()},e.prototype.empty=function(){return this.messenger.emit("empty"),this},e.prototype.__mergeDefaultSettings=function(e){if((e=p(p({},this.defaultSettings),e)).versionDefaults&&e.version&&!e.versionDefaults.hasOwnProperty(e.version)){var t=Object.keys(e.versionDefaults);throw new Error("Invalid version. It should be one of "+t.join(" | "))}var n=e.versionDefaults&&e.version?e.versionDefaults[e.version]:{};return p(p({},n),e)},e}();!function(e){e.G5="G5",e.G6="G6"}(f||(f={}));var m,g,y,v,w,b;n(0);!function(e){e.Single="single",e.Multiple="multiple"}(m||(m={})),function(e){e.SiteFiles="private",e.FreeFromWix="public",e.Trash="trash",e.Favorites="favorites",e.VisitorsUploads="visitorsUploads",e.Recommended="custom",e.Shutterstock="photoStock",e.Search="search",e.Empty="empty"}(g||(g={})),function(e){e.PX500="500px",e.Facebook="facebook",e.Dribbble="dribbble",e.GoogleDrive="googleDrive",e.Dropbox="dropbox",e.Instagram="instagram",e.Flickr="flickr",e.DeviantArt="deviantArt",e.GooglePhotos="googlePhotos",e.WixSite="wixSite",e.Link="link"}(y||(y={})),function(e){e.LastModified="lastModified",e.OldestFirst="oldestFirst",e.AZ="az",e.ZA="za"}(v||(v={})),function(e){e.Gallery="gallery",e.GalleryWithPanel="galleryWithPanel",e.List="list",e.ListWithPanel="listWithPanel"}(w||(w={})),function(e){e.Picture="picture",e.Music="music",e.Document="document",e.Video="video",e.Zip="archive",e.VectorArt="shape",e.SWF="swf",e.UFont="ufont",e.Watermark="watermark",e.SiteIcon="site_icon",e.SecurePicture="secure_picture",e.SecureMusic="secure_music",e.SecureDocument="secure_document",e.SecureVideo="secure_video",e.SecureZip="secure_archive"}(b||(b={}));var S="manage.editorx.com",M="manage.wix.com";window.addEventListener("keydown",s,!1);var P,O,k=(O=-1!==location.hostname.indexOf("editorx.com")?S:M,new d({version:f.G5,versionDefaults:(P={},P[f.G5]={mediaGalleryBaseHost:"https://"+O+"/media-manager/g5/"},P[f.G6]={mediaGalleryBaseHost:"https://"+O+"/media-manager/g6/"},P)}));"undefined"==typeof window||window.MediaFrame||(window.MediaFrame=k)}]);
//# sourceMappingURL=MediaFrame.bundle.min.js.map